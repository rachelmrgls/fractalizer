<head>
    <title> COS426 Final Project &mdash; Fractals &mdash; Writeup</title>
    <link href="css/style.css" type="text/css" rel="stylesheet"/>
</head>

<body>
    <script src="js/student.js"> </script>
    <script src="js/writeup.js"> </script>
    <div class="top">
    <div class="main_div">

        <h1> <div class=assignment>COS426 Final Project</div>Fractals &mdash; Writeup</h1>
        <h1>Switch to: <a href='index.html'>Interactive Editor</a></h1>
        <div class='selectable'>
        <h1 id='student'></h1>
        
        Table of Contents:
<ul>
<li><a href='#Introduction'>Introduction</a></li><ul>
<li><a href='#Goal'>Goal</a></li>
<li><a href='#PreviousWork'>Previous Work</a></li>
<li><a href='#Approach'>Approach</a></li>
</ul>
<li><a href='#Methodology'>Methodology</a></li>
<ul>
<li><a href='#ImplementationDecisions'>Implementation Decisions</a></li>
</ul>
<li><a href='#Results'>Results</a></li>
<li><a href='#Discussion'>Discussion</a></li>
<li><a href='#Conclusion'>Conclusion</a></li>
</ul></div>

<p><hr><p><a name='Introduction'></a><h1>Introduction</h1><p><hr><p>

<a name='Goal'></a><h2>Goal</h2>
Inspired by the <a href='https://www.youtube.com/watch?v=l-lTqSNmcys'>Mandelbulb 3D</a> shown in precept, our goal was to create a fractal-based sound visualizer. We envisioned an interactive, explorable 3D environment in which our extra dimension, music, controlled parameters of the animation. This visualizer could be used for educational purposes to help students conceptualize fractals in higher dimensions or for entertainment in the music industry. Our project to a wide range of audiences since it is both visually appealing and mathematically based. In general, fractals can be used to generate realistic terrains for movies and video games.

<a name='PreviousWork'></a><h2>Previous Work</h2>

The <a href='http://www.mandelbulber.com/'>Mandelbulber</a> system uses raymarching to render fractals in real-time. This technique relies on distance estimation, a method developed in the <a href='http://www.fractalforums.com/'>Fractal Forums</a> community. The raymarching algorithm iteratively steps forward in the ray direction according to the distance estimation function. <a href='http://iquilezles.org/'>Inigo Quilez's</a> site includes tutorials on distance estimation and raymarching, in addition to sample code and images. <a href='http://inst.eecs.berkeley.edu/~cs184/sp12/assignments/Archive/HW6/Fractal%20Renderer.htm'>Kevin Horowitz</a> describes some of the effects (fog, glow, environmental lighting by ambient occlusion) easily implemented within a pre-existing a raymarching framework. <a href='http://blog.hvidtfeldts.net/index.php/2011/06/distance-estimated-3d-fractals-part-i/'>Mikael Christensen</a> presents another helpful tutorial on the same topic.
<p>
Christensen also covers an alternative approach to raymarching known as <a href="http://blog.hvidtfeldts.net/index.php/2015/01/path-tracing-3d-fractals/">path tracing</a> in the context of the open source, GLSL-based <a href='http://syntopia.github.io/Fragmentarium/'>Fragmentarium</a> system. Though both path tracing and raymarching shoot rays from the camera into the scene, path tracing calculates global illumination by integrating over the all the illuminance arriving at a single point on the surface and then reducing by the bidirectional reflectance distribution function (BRDF). Finally, <a href="http://joshondesign.com/p/books/canvasdeepdive/chapter12.html">Josh Marinacci</a> presents an introduction to WebAudio and gives sample code for creating a basic visualizer by getting a frequency analysis of the sound playing at each frame of the animation.
[[When do previous approaches fail/succeed?]]

<a name='Approach'></a><h2>Approach</h2>
Our project relies on GLSL shaders running in the browser and should be accessed using Google Chrome on a Mac (preferably on a processessor with at least 8GB of RAM). We built our visualizer starting with the framework from previous assignments - specifically, the raytracer in Assignment 3 and the GUI from Assignment 2. Based on our initial survey of the previous work and the fact that we already had a working version of raytracing, we chose to implement raymarching rather than path tracing. We used fast fourier transforms (FFT) to sample the audio data using WebAudio, and animated the colors, size, and other fractal parameters based on the resulting data. We expected this approach to work well for smaller screen sizes, since we must march a new ray for each pixel. Similarly, computers with more RAM tend to outperform they are better equipped to handle the necessary computations. Finally, we anticipated that the visualizer would run more smoothly with lower recursion levels since this cuts the runtime of the distance estimation function.

<p><hr><p><a name='Methodology'></a><h1>Methodology</h1><p><hr><p>
<a name='ImplementationDecisions'></a><h2>Implementation Decisions</h2>
<ul>
<li>Raymarching vs. Path tracing
<p>
The primary reason for choosing raymarching over path tracing was that our initial 
</li>
<li>Calculating Surface Normals</li>
<li>Bounding Volumes</li>
</ul>

<p><hr><p><a name='Results'></a><h1>Results</h1><p><hr><p>
We measured success qualitatively based on the resolution of our rendering, the speed of the animation, and the extent to which the visualizer seemed representative of the music. We tested our final project on computers with 8, 16, and 32 Gb of RAM and observed the expected trend that increasing RAM allowed for higher resolution, faster animations. Overall, our results indicate that we would need to further optimize our distance estimation functions in order to better accomodate users with less RAM.
<p><hr><p><a name='Discussion'></a><h1>Discussion</h1><p><hr><p>
In general, our approach was successful in that we were able to create a fractal-based sound visualizer where audio inputs alter the nature of the generated images. However, there are obvious limitations to this approach. Of the implementation decisions discussed above, in a few cases we chose alternatives based on the time constraints of the project rather than the success of the output. For instance, given additional time, we would prefer to implement a 2D analog of the ray marcher to render the Mandelbrot set and the 2D Julia sets as 2D images rather than 2D surfaces embedded in three dimensions. Furthermore, the coloring for the Julia and Mandelbrot sets is currently based purely on the number of iterations. However, scaling presents challenges since we do not know the range of iterations ahead of time. A common coloring scheme creates a histogram of iterations in order to adjust the coloring more accurately. 
<p>
Another area for potential follow-up work would be optimizing the code. As previously mentioned, since the distance estimation functions are called repeatedly, improving these would be a worthwhile use of time. Additionally, we could further investigate analytic methods of calculating the normals to reduce the number of calculations per pixel. Apart from the changes to the technical aspect of the raymarcher, we might improve our UI and adjust the visualizer to give the user more color and music options. For instance, we could include a search bar powered by SoundCloud, as in <a href="http://lahacks15.yaodaniel.com/">this</a> recent submission to the 2015 LA Hacks competition. Finally, we might create a brief tutorial since the advantage of increased interactivity is lost if users are unaware of the functionality of the various key controls.
<p>
In the course of completing this project, we learned about raymarching, distance estimation, and constructing fractals. We found that fractals in higher dimensions (i.e. the Julia set) were more challenging to conceptualize, and therefore also more difficult to produce visually appealing animations for. During this assignment, we found the resources in the New Media Center (in 130 Lewis Science Library) invaluable, since testing our project was drastically simpler on machines with large amounts of RAM. The New Media Center is well-suited to the needs of future graphics students frustrated by the performance of the assignments on their personal laptops.

<p><hr><p><a name='Conclusion'></a><h1>Conclusion</h1><p><hr><p>
To sum up, raymarching and distance estimation allow us to render infinitely complex structures with only a few lines of code. Fractals tend to produce satisfying visual results despite their simple implementation, making them an attractive option for graphics enthusiasts looking to tinker. Different rendering techniques or styles, as well as extensions of known fractals into higher dimensions, are all ongoing topics of discussion in popular fractal forums online. In short, this project could be extended in a number of directions, and the 'wow' factor of the end results was limited only by the amount of time which we had to work on it.

    </div>
    </div>
</body>
</html>